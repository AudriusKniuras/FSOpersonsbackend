{"version":3,"sources":["services/db.js","components/Filter.js","components/Form.js","components/Message.js","App.js","index.js"],"names":["baseUrl","db","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deleteEntry","delete","Filter","persons","setNewNameFilter","newNameFilter","setPersons","setResponseStatus","setMessage","personsToShow","filter","person","name","includes","value","onChange","event","target","map","number","onClick","window","confirm","console","log","catch","error","setTimeout","p","handleDelete","Form","props","onSubmit","preventDefault","existingPerson","find","newName","obj","newNumber","undefined","responseData","setNewName","setNewNumber","concat","type","Message","message","responseStatus","className","App","useState","useEffect","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1b69963c.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deleteEntry = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(\"success\")\n}\n\nconst db = {\n  getAll, \n  create, \n  update,\n  deleteEntry\n}\n\nexport default db;","import db from \"../services/db\";\n\nconst Filter = ({\n  persons,\n  setNewNameFilter,\n  newNameFilter,\n  setPersons,\n  setResponseStatus,\n  setMessage,\n}) => {\n  const handleNameFilterInput = (event) => {\n    setNewNameFilter(event.target.value);\n  };\n\n  const personsToShow = persons.filter((person) =>\n    person.name.includes(newNameFilter)\n  );\n\n  const handleDelete = (person) => {\n    if (window.confirm(`Do you want to delete entry: ${person.name}?`)) {\n      db.deleteEntry(person.id)\n        .then(() => console.log(\"Successfully deleted\"))\n        .catch((error) => {\n          setResponseStatus(\"error\");\n          setMessage(`Could not delete entry\\n${error}`);\n          setTimeout(() => {\n            setResponseStatus(\"\");\n            setMessage(\"\");\n          }, 5000);\n        });\n      setPersons(persons.filter((p) => p.id !== person.id));\n    }\n  };\n\n  return (\n    <div>\n      filter by name:{\" \"}\n      <input value={newNameFilter} onChange={handleNameFilterInput} />\n      <h2>Numbers</h2>\n      <ul>\n        {personsToShow.map((person) => (\n          <li key={person.id}>\n            {person.name} {person.number}{\" \"}\n            <button onClick={() => handleDelete(person)}>delete</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Filter;\n","import db from \"../services/db\";\n\nconst Form = (props) => {\n  const handleSetPerson = (event) => {\n    event.preventDefault();\n\n    const existingPerson = props.persons.find(\n      (person) => person.name === props.newName\n    );\n\n    const obj = {\n      name: props.newName,\n      number: props.newNumber,\n    };\n\n    if (existingPerson !== undefined) {\n      if (\n        window.confirm(\n          `${existingPerson.name} already exists in the phonebook. Replace number?`\n        )\n      ) {\n        db.update(existingPerson.id, obj)\n          .then((responseData) => {\n            props.setPersons(\n              props.persons.map((person) =>\n                person.id === responseData.id ? responseData : person\n              )\n            );\n            props.setResponseStatus(\"success\");\n            props.setMessage(`${responseData.name} updated`);\n            setTimeout(() => {\n              props.setResponseStatus(\"\");\n              props.setMessage(\"\");\n            }, 5000);\n            props.setNewName(\"\");\n            props.setNewNumber(\"\");\n          })\n          .catch((error) => {\n            props.setResponseStatus(\"error\");\n            props.setMessage(`Item cold not be changed. \\n${error}`);\n            setTimeout(() => {\n              props.setResponseStatus(\"\");\n              props.setMessage(\"\");\n            }, 5000);\n          });\n      }\n    } else {\n      db.create(obj)\n        .then((responseData) => {\n          props.setPersons(props.persons.concat(responseData));\n          props.setNewName(\"\");\n          props.setNewNumber(\"\");\n          props.setResponseStatus(\"success\");\n          props.setMessage(`${responseData.name} added`);\n          setTimeout(() => {\n            props.setResponseStatus(\"\");\n            props.setMessage(\"\");\n          }, 5000);\n        })\n        .catch((error) => {\n          props.setResponseStatus(\"error\");\n          props.setMessage(`Item cold not be added. \\n${error.response.data}`);\n          setTimeout(() => {\n            props.setResponseStatus(\"\");\n            props.setMessage(\"\");\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameInput = (event) => {\n    props.setNewName(event.target.value);\n  };\n\n  const handleNumberInput = (event) => {\n    props.setNewNumber(event.target.value);\n  };\n\n  return (\n    <form onSubmit={handleSetPerson}>\n      <div>\n        name: <input value={props.newName} onChange={handleNameInput} />\n      </div>\n      <div>\n        number: <input value={props.newNumber} onChange={handleNumberInput} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","const Message = ({ message, responseStatus }) => {\n  if (responseStatus === \"success\") {\n    return <div className=\"success\">{message}</div>;\n  } else if (responseStatus === \"error\") {\n    return <div className=\"error\">{message}</div>;\n  } else {\n    return null;\n  }\n};\n\nexport default Message;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Form from \"./components/Form\";\nimport axios from \"axios\";\nimport Message from \"./components/Message\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [responseStatus, setResponseStatus] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    axios\n      .get(\"/api/persons\")\n      .then((response) => setPersons(response.data))\n      .catch((error) => {\n        setResponseStatus(\"error\");\n        setMessage(\"Failure to get stuff from db\");\n      });\n  }, []);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newNameFilter, setNewNameFilter] = useState(\"\");\n\n  return (\n    <div>\n      <h2>Phonebook!</h2>\n      <Message message={message} responseStatus={responseStatus} />\n      <Form\n        persons={persons}\n        newName={newName}\n        setNewName={setNewName}\n        newNumber={newNumber}\n        setNewNumber={setNewNumber}\n        setPersons={setPersons}\n        setResponseStatus={setResponseStatus}\n        setMessage={setMessage}\n      />\n      <Filter\n        persons={persons}\n        setNewNameFilter={setNewNameFilter}\n        newNameFilter={newNameFilter}\n        setPersons={setPersons}\n        setResponseStatus={setResponseStatus}\n        setMessage={setMessage}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}